@page
@model IndexModel
@{
	ViewData["Title"] = "Home page";
}


<div x-show="tab=='recipes'">
	<div class="container d-flex justify-content-between align-items-center my-4">
		<h2>All Recipes</h2>
		<a class="btn btn-primary h-25" asp-page="Create">Add a Recipe</a>
	</div>
	<div x-data="{ recipes: {}}"
		 x-init="recipes = await fetch('https://localhost:7131/recipes').then(response => response.json());"
		 class="row row-cols-sm-1 row-cols-xl-2 g-4">
		<template x-for="recipe in recipes">
			<div class="col">
				<div class="card">
					<div class="card-body">

						<h5 class="card-title text-center" x-text="recipe.title"></h5>

						<template x-for="category in recipe.categories">
							<span class="badge bg-success mb-2 mx-1" x-text="category"></span>
						</template>

						<div class="accordion">
							<div class="accordion-item" x-data x-id=['Ingredients'+recipe.id]>
								<h2 class="accordion-header">
									<button x-data class="accordion-button collapsed" type="button" data-bs-toggle="collapse" :data-bs-target="'#' + $id('Ingredients'+recipe.id)" aria-expanded="true" :aria-controls="$id('Ingredients'+recipe.id)">
										Ingredients
									</button>
								</h2>
								<div x-data :id="$id('Ingredients'+recipe.id)" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne">
									<div class="accordion-body">
										<ul>
											<template x-for="ingredient in recipe.ingredients">

												<li x-text="ingredient"></li>

											</template>
										</ul>
									</div>
								</div>
							</div>

							<div class="accordion-item" x-data x-id=['Instructions'+recipe.id]>
								<h2 class="accordion-header">
									<button x-data class="accordion-button collapsed" type="button" data-bs-toggle="collapse" :data-bs-target="'#' + $id('Instructions'+recipe.id)" aria-expanded="true" :aria-controls="$id('Instructions'+recipe.id)">
										Instructions
									</button>
								</h2>
								<div x-data :id="$id('Instructions'+recipe.id)" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne">
									<div class="accordion-body">
										<ul>
											<template x-for="instruction in recipe.instructions">

												<li x-text="instruction"></li>

											</template>
										</ul>
									</div>
								</div>
							</div>

						</div>

						<div class="text-center mt-3">
							<div class="btn-group">
								<a class="btn btn-primary">
									<i class="bi bi-pencil-square"></i>
								</a>
								<a class="btn btn-danger">
									<i class="bi bi-trash"></i>
								</a>
							</div>
						</div>

					</div>
				</div>
			</div>
		</template>
	</div>
</div>

<div x-show="tab=='categories'">
	<div class="container d-flex justify-content-between align-items-center my-4">
		<h2>All Categories</h2>
		<a class="btn btn-primary h-25" asp-page="Create">Add a Category</a>
	</div>

	<div class="row row-cols-auto justify-content-center g-4"
		 x-data="{ categories: {}}"
		 x-init="categories = await fetch('https://localhost:7131/categories').then(response => response.json());">
		<template x-for="category in categories">
			<div class="col">
				<div class="card text-center">
					<div class="card-body">
						<h5 class="card-title" x-text="category"></h5>
						<div class="btn-group">
							<a class="btn btn-primary">
								<i class="bi bi-pencil-square"></i>
							</a>
							<a class="btn btn-danger">
								<i class="bi bi-trash"></i>
							</a>
						</div>
					</div>
				</div>
			</div>
		</template>

	</div>
</div>